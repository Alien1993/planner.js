var Handlebars=function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e);return f}();!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):(a.Ds=a.Ds||{},a.Ds.HashMap=b())}(this,function(){"use strict";var a=function(){function a(){throw new Error("Illegal operation for Hashmap")}function b(a){return typeof a+" "+(a instanceof Object?a._hash||(a._hash=++c):a.toString())}var c=0,d=0;this.get=function(a){var c=this[b(a)];return c&&c.value},this.put=function(a,c){var e=b(a);return"undefined"==typeof this[e]?(this[e]={key:a,value:c},d+=1):this[e].value=c,this},this.remove=function(a){var c=b(a),e=this[c];return"undefined"!=typeof e&&(d-=1,delete this[c]),this},Object.defineProperty(this,"size",{get:function(){return d},set:function(){a()}})};return a}),function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):(a.Ds=a.Ds||{},a.Ds.Set=b())}(this,function(){"use strict";var a=function(){function a(){throw new Error("Illegal operation for Set")}function b(a){return typeof a+" "+(a instanceof Object?a._hash||(a._hash=++c):a.toString())}var c=0,d={},e=0;this.in=function(a){var c=b(a);return"undefined"!=typeof d[c]},this.add=function(a){var c=b(a);return"undefined"==typeof d[c]&&(e+=1),d[c]=a,this},this.update=function(a){for(var c=0;c<a.length;c++){var f=b(a[c]);"undefined"==typeof d[f]&&(e+=1),d[f]=a[c]}return this},this.remove=function(a){var c=b(a),f=d[c];if("undefined"==typeof f)throw new Error("KeyError: object "+f+" is not stored");return e-=1,delete d[c],this},this.discard=function(a){try{this.remove(a)}catch(b){}return this},this.clear=function(){for(var a in d)d.hasOwnProperty(a)&&this.remove(d[a]);return this},this.items=function(){return Object.keys(d).map(function(a){return d[a]})},Object.defineProperty(this,"size",{get:function(){return e},set:function(){a()}})};return a}),function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):a.Messenger=b()}(this,function(){"use strict";function a(){var a={},b=-1;this.publish=function(b,c){if(!a[b])return!1;for(var d=a[b],e=d?d.length:0;e--;)d[e].func.apply(this,c);return this},this.subscribe=function(c,d){if(!c||"function"!=typeof d)throw new Error("Missing a valid channel or callback");a[c]||(a[c]=[]);var e=(++b).toString();return a[c].push({token:e,func:d}),e},this.unsubscribe=function(b){if(!b)throw new Error("Can't unsubscribe without a valid token");for(var c in a)if(a[c])for(var d=0,e=a[c].length;e>d;d++)if(a[c][d].token===b)return a[c].splice(d,1),b;throw new Error("Can't unsubscribe from a token that doesn't exist")}}return a}),function(a,b){"use strict";function c(a,c){function g(a){var c=this;Object.defineProperty(c,"__attributes__",{value:{}}),Object.defineProperty(c,"__inFlightAttributes__",{value:{}}),a=c.deserializer(a),c.__fields__.forEach(function(d){c.__attributes__[d]=a[d],c.__inFlightAttributes__[d]=b}),c.rollback=function(){for(var a in c.__inFlightAttributes__)c.__inFlightAttributes__.hasOwnProperty(a)&&(c.__inFlightAttributes__[a]=b)},c.persist=function(){for(var a in c.__inFlightAttributes__)c.__inFlightAttributes__.hasOwnProperty(a)&&"undefined"!=typeof c.__inFlightAttributes__[a]&&(c.__attributes__[a]=c.__inFlightAttributes__[a],c.__inFlightAttributes__[a]=b)}}function h(){return d({},this.__attributes__,this.__inFlightAttributes__)}function i(a){return a||{}}function j(a){if("function"!=typeof a)throw new Error("Model serializer should be a function");g.prototype.toJSON=function(){var b=h.apply(this);return a.apply(b)}}function k(a){if("function"!=typeof a)throw new Error("Model deserializer should be a function");g.prototype.deserializer=a}return Object.defineProperty(g.prototype,"__fields__",{value:a,writable:!0}),e(g.prototype.__fields__,g.prototype),f(c,g.prototype),g.prototype.toJSON=h,g.prototype.deserializer=i,g.setSerializer=j,g.setDeserializer=k,g}function d(a){var c=Object.prototype.toString;a=a||{};for(var e=1;e<arguments.length;e++){var f=arguments[e];if(f)for(var g in f)if(f.hasOwnProperty(g)&&"undefined"!=typeof f[g]){var h=c.call(f[g]);switch(h){case"[object Object]":a[g]=d(a[g],f[g]);break;default:a[g]=f[g]}}}return Object.getOwnPropertyNames(a).length>0?a:b}function e(a,c){a.forEach(function(a){Object.defineProperty(c,a,{get:function(){return this.__inFlightAttributes__[a]!==b?this.__inFlightAttributes__[a]:this.__attributes__[a]},set:function(b){this.__inFlightAttributes__[a]=b}})})}function f(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}c.extend=function(a,b,d){var g=new c(b);return g.prototype=new a,g.prototype.__fields__=b.concat(g.prototype.__fields__),e(b,g.prototype),f(d,g.prototype),g},a.Model=c}(window),function(a){"use strict";var b=function(c,d){var e=a.Planner.Utils.getAttributes(c);return d=a.Planner.Utils.extend({},b.DEFAULTS,a.Planner.Plugins.DEFAULTS,e,d),d.plugins=d.plugins||"string"==typeof d.plugins&&d.plugins.split(" ")||[],d.model=d.model||Planner.Models.Card,new a.Planner.Instance(c,d)};b.CONST={ALIGNMENT:{TOP:0,MIDDLE:1}},b.DEFAULTS={autoId:!0,show:!0,plugins:[],model:null,timeslots:4,timeslotHeight:25,timeslotPadding:20,cardTitleMargin:6,centered:b.CONST.ALIGNMENT.TOP,columnLabels:[],rowLabels:[],visibleColumns:7},document.addEventListener("DOMContentLoaded",function(){for(var a=document.querySelectorAll('[data-planner=""]'),c=0;c<a.length;c++)new b(a[c])}),a.Planner=b}(window),Planner.Modernizr=function(a,b,c){function d(a){n.cssText=a}function e(a,b){return typeof a===b}var f,g,h,i="2.8.3",j={},k=b.documentElement,l="modernizr",m=b.createElement(l),n=m.style,o=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),p={},q=[],r=q.slice,s=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:l+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',l,'">',a,"</style>"].join(""),j.id=l,(m?j:n).innerHTML+=f,n.appendChild(j),m||(n.style.background="",n.style.overflow="hidden",i=k.style.overflow,k.style.overflow="hidden",k.appendChild(n)),g=c(j,a),m?j.parentNode.removeChild(j):(n.parentNode.removeChild(n),k.style.overflow=i),!!g},t={}.hasOwnProperty;h=e(t,"undefined")||e(t.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return t.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=r.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(r.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(r.call(arguments)))};return d}),p.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:s(["@media (",o.join("touch-enabled),("),l,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c};for(var u in p)h(p,u)&&(g=u.toLowerCase(),j[g]=p[u](),q.push((j[g]?"":"no-")+g));return j.addTest=function(a,b){if("object"==typeof a)for(var d in a)h(a,d)&&j.addTest(d,a[d]);else{if(a=a.toLowerCase(),j[a]!==c)return j;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(k.className+=" "+(b?"":"no-")+a),j[a]=b}return j},d(""),m=f=null,j._version=i,j._prefixes=o,j.testStyles=s,j}(this,this.document),function(a,b){"use strict";a.Instance=function(c,d){this.element=c,this.options=d,this.mapCard=new b,this.mapDom=new b,this.events=new Messenger,0===d.columnLabels.length&&(d.columnLabels=a.Helpers.getDefaultColumns()),0===d.rowLabels.length&&(d.rowLabels=a.Helpers.getDefaultRows()),d.visibleColumns=d.visibleColumns>d.columnLabels.length?d.columnLabels.length:d.visibleColumns,c.setAttribute("data-planner","container"),d.show&&(this.element.innerHTML=a.Templates.body(d));var e=document.querySelector("head");e.appendChild(this._computedCSS()),a.Plugins.load(d.plugins,this)}}(window.Planner=window.Planner||{},Ds.HashMap),function(a,b){"use strict";a.pad=function(a,b){return"undefined"==typeof b&&(b=-2),("0"+a).slice(b)},a.extend=function(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},a.addClass=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},a.removeClass=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},a.hasClass=function(a,b){a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)},a.createElement=function(a){var b=document.createElement("div");return b.innerHTML=a,b.childNodes[0]},a.getAttributes=function(a){var c=a.attributes,d={};for(var f in c)if(c.hasOwnProperty(f)&&c[f].name&&c[f].name.indexOf("data-")>-1){var g=e(c[f].name.split("data-")[1]),h=c[f].value;if("string"==typeof h)try{h="true"===h?!0:"false"===h?!1:"null"===h?null:+h+""===h?+h:h}catch(i){}else h=b;d[g]=h}return d},a.index=function(a){var b=a.parentNode;return Array.prototype.indexOf.call(b.children,a)},a.offset=function(a){var b=a.getBoundingClientRect();return{top:b.top+document.body.scrollTop,left:b.left+document.body.scrollLeft}},a.updateDate=function(a,b,c,d){var e=new Date(a);return e.setHours(b),e.setMinutes(c),e.setSeconds(d||0),e};var c=/([\:\-\_]+(.))/g,d=/^moz([A-Z])/,e=function(a){return a.replace(c,function(a,b,c,d){return d?c.toUpperCase():c}).replace(d,"Moz$1")}}(Planner.Utils=Planner.Utils||{}),function(a,b){"use strict";var c=[{id:0,name:"Monday"},{id:1,name:"Tuesday"},{id:2,name:"Wednesday"},{id:3,name:"Thursday"},{id:4,name:"Friday"},{id:5,name:"Saturday"},{id:6,name:"Sunday"}],d=[{name:"00:00"},{name:"01:00"},{name:"02:00"},{name:"03:00"},{name:"04:00"},{name:"05:00"},{name:"06:00"},{name:"07:00"},{name:"08:00"},{name:"09:00"},{name:"10:00"},{name:"11:00"},{name:"12:00"},{name:"13:00"},{name:"14:00"},{name:"15:00"},{name:"16:00"},{name:"17:00"},{name:"18:00"},{name:"19:00"},{name:"20:00"},{name:"21:00"},{name:"22:00"},{name:"23:00"}];a.getDefaultColumns=function(){return c},a.getDefaultRows=function(){return d},a.generateId=function(a){return a.lastId=a.lastId||999,++a.lastId},b.registerHelper("times",function(a,b){for(var c="",d=0;a>d;++d)c+=b.fn(d);return c})}(Planner.Helpers=Planner.Helpers||{},Handlebars),function(a,b){"use strict";var c={};c._computedCSS=function(){var a=this.options.timeslotHeight*this.options.timeslots,b=this.options.centered?a/2:a,c={timeslots:this.options.timeslots,timeslotHeight:this.options.timeslotHeight,timeslotPadding:a-this.options.timeslotPadding,timeslotNormalized:a-this.options.timeslotPadding-1,lastTimeslotPadding:b,sliderWidth:100/this.options.visibleColumns},d=document.createElement("style");return d.innerHTML=Planner.Templates.styles(c),d},c._attributeToIndex=function(a){var b;if("function"==typeof a.getHours&&"function"==typeof a.getMinutes)b=a.getHours()*this.options.timeslots+a.getMinutes()/(60/this.options.timeslots);else{if("string"!=typeof a)throw new Error("Unable to find a valid index from start/end card attribute. Define your own implementation.");b=this.options.rowLabels.indexOf(a)}return b},c._indexToAttribute=function(a){var b=Math.floor((a-1)/this.options.timeslots),c=15*(a%this.options.timeslots);return c===a%this.options.timeslots&&(b+=1),{hours:b,minutes:c}},a.prototype=b.extend(a.prototype,c)}(Planner.Instance=Planner.Instance||{},Planner.Utils),function(a,b,c){"use strict";var d={};d.drawCard=function(a,c){var d,e=this.mapCard.get(a);if("undefined"==typeof e){a.fixed=c,e={},this.mapCard.put(a,e);for(var f=0;f<a.columns.length;f++){var g=a.columns[f];d=b.createElement(Planner.Templates.card(a)),this.updateDom(d,a,g),this.mapDom.put(d,a),e[g]=d,this._drawDom(d)}this.events.publish("cardDrawn",[a])}},d._drawDom=function(a){var c=parseInt(a.getAttribute("data-column"),10),d=parseInt(a.getAttribute("data-start"),10),e=b.index(this.element.querySelector('[data-column-id="'+c+'"]'))+1;this.element.querySelector(".planner-column:nth-of-type("+e+") > div:nth-of-type("+(d+1)+")").appendChild(a),this.events.publish("cardDomDrawn",[this.mapDom.get(a),a])},d.updateDom=function(a,b,c){var d=this._attributeToIndex(b.start),e=this._attributeToIndex(b.end)-1;if(0>e&&(e=this.options.timeslots*this.options.rowLabels.length-1),e=d>e?d:e,e>=d){var f=(e-d+1)*this.options.timeslotHeight-this.options.cardTitleMargin;"undefined"!=typeof c&&a.setAttribute("data-column",c),a.setAttribute("data-id",b.id),a.setAttribute("data-start",d),a.setAttribute("data-end",e),a.querySelector(".planner-card-time").innerHTML=b.header(),a.style.height=f+"px"}},d._removeDom=function(a){a.parentNode.removeChild(a);var b=this.mapDom.get(a),c=this.mapCard.get(b);delete c[parseInt(a.getAttribute("data-column"),10)],this.mapDom.remove(a),this.events.publish("cardDomDeleted",[b,a])},d.undrawCard=function(a){var b,c=this.mapCard.get(a);for(var d in c)c.hasOwnProperty(d)&&(b=c[d],this._removeDom(b));this.mapCard.remove(a),this.events.publish("cardDeleted",[this])},d.clear=function(){for(var a,b=document.querySelectorAll(".planner-card"),d=0;d<b.length;d++)a=b[d],a.parentNode.removeChild(a);this.mapCard=new c,this.mapDom=new c},a.prototype=b.extend(a.prototype,d)}(Planner.Instance=Planner.Instance||{},Planner.Utils,Ds.HashMap),function(a,b){"use strict";function c(){var a="";return null!==this.start&&null!==this.end&&(a=Planner.Utils.pad(this.start.getHours())+":"+Planner.Utils.pad(this.start.getMinutes())+" - "+Planner.Utils.pad(this.end.getHours())+":"+Planner.Utils.pad(this.end.getMinutes())),a}function d(a){this.id=a.id||this.id,this.title=a.title||this.title,this.content=a.content||this.content,this.start=a.start||this.start,this.end=a.end||this.end,this.columns=a.columns||this.columns}var e=["id","title","content","start","end","columns"],f={header:c,update:d};b.Card=new a(e,f)}(window.Model,Planner.Models=Planner.Models||{}),this.Planner=this.Planner||{},this.Planner.Templates=this.Planner.Templates||{},this.Planner.Templates.interaction=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f+="<style>\n    \n\n    div.planner-card > .planner-card-drag {\n        width: 100%;\n        text-align: center;\n        font-size: 10px;\n        bottom: 1px;\n        position: absolute;\n        cursor: ns-resize;\n    }\n\n    div.planner-card.resizable {\n        cursor: ns-resize;\n    }\n</style>\n"}),this.Planner.Templates.mobile=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+="<style>\n    \n\n    @media (max-width: 768px) {\n        .planner-container.planner-column {\n            margin-right: 5px;\n        }\n\n        .planner-header.planner-column-header {\n            margin-right: 5px;\n        }\n\n        .planner-timeslots {\n            padding-right: 5px;\n        }\n\n        .planner-card-drag {\n            display: none;\n        }\n    }\n\n    \n\n    @media (max-width: 768px) and (orientation: portrait) {\n        .planner-container.planner-column {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.phone,f=null==f||f===!1?f:f.portrait,typeof f===h?f.apply(b):f))+"%;\n        }\n\n        .planner-header.planner-column-header {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.phone,f=null==f||f===!1?f:f.portrait,typeof f===h?f.apply(b):f))+"%;\n        }\n\n        .planner-slider {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.phone,f=null==f||f===!1?f:f.portrait,typeof f===h?f.apply(b):f))+"%;\n        }\n    }\n\n    \n\n    @media (max-width: 768px) and (orientation: landscape) {\n        .planner-container.planner-column {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.phone,f=null==f||f===!1?f:f.landscape,typeof f===h?f.apply(b):f))+"%;\n        }\n\n        .planner-header.planner-column-header {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.phone,f=null==f||f===!1?f:f.landscape,typeof f===h?f.apply(b):f))+"%;\n        }\n\n        .planner-slider {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.phone,f=null==f||f===!1?f:f.landscape,typeof f===h?f.apply(b):f))+"%;\n        }\n    }\n\n    \n\n    @media (min-width: 768px) and (max-width: 991px) and (orientation: portrait) {\n        .planner-container.planner-column {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.tablet,f=null==f||f===!1?f:f.portrait,typeof f===h?f.apply(b):f))+"%;\n        }\n\n        .planner-header.planner-column-header {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.tablet,f=null==f||f===!1?f:f.portrait,typeof f===h?f.apply(b):f))+"%;\n        }\n\n        .planner-slider {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.tablet,f=null==f||f===!1?f:f.portrait,typeof f===h?f.apply(b):f))+"%;\n        }\n    }\n\n    \n\n    @media (min-width: 768px) and (max-width: 991px) and (orientation: landscape) {\n        .planner-container.planner-column {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.tablet,f=null==f||f===!1?f:f.landscape,typeof f===h?f.apply(b):f))+"%;\n        }\n\n        .planner-header.planner-column-header {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.tablet,f=null==f||f===!1?f:f.landscape,typeof f===h?f.apply(b):f))+"%;\n        }\n\n        .planner-slider {\n            width: "+i((f=b&&b.widths,f=null==f||f===!1?f:f.tablet,f=null==f||f===!1?f:f.landscape,typeof f===h?f.apply(b):f))+"%;\n        }\n    }\n</style>\n"}),this.Planner.Templates.styles=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+="\n\n.planner-column > div {\n    height: ",(g=c.timeslotHeight)?f=g.call(b,{hash:{},data:e}):(g=b&&b.timeslotHeight,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"px;\n}\n\n.planner-column > div:nth-child(",(g=c.timeslots)?f=g.call(b,{hash:{},data:e}):(g=b&&b.timeslots,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"n) {\n    border-bottom: 2px solid #cccccc;\n}\n\n\n\n.planner-timeslots > div:not(:first-child) {\n    padding-top: ",(g=c.timeslotPadding)?f=g.call(b,{hash:{},data:e}):(g=b&&b.timeslotPadding,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"px;\n}\n\n\n\n.planner-timeslots > div:nth-child(2) {\n    padding-top: ",(g=c.timeslotNormalized)?f=g.call(b,{hash:{},data:e}):(g=b&&b.timeslotNormalized,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"px;\n}\n\n.planner-timeslots > div:last-child {\n    padding-bottom: ",(g=c.lastTimeslotPadding)?f=g.call(b,{hash:{},data:e}):(g=b&&b.lastTimeslotPadding,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"px;\n}\n\n.planner-slider {\n    width: ",(g=c.sliderWidth)?f=g.call(b,{hash:{},data:e}):(g=b&&b.sliderWidth,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"%;\n}\n"}),this.Planner=this.Planner||{},this.Planner.Templates=this.Planner.Templates||{},Handlebars.registerPartial("card",this.Planner.Templates.card=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="planner-card">\n    <div class="planner-card-time">',(g=c.header)?f=g.call(b,{hash:{},data:e}):(g=b&&b.header,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</div>\n    <div class="planner-card-title">',(g=c.title)?f=g.call(b,{hash:{},data:e}):(g=b&&b.title,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</div>\n</div>\n"})),Handlebars.registerPartial("column",this.Planner.Templates.column=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f})),Handlebars.registerPartial("timeslot",this.Planner.Templates.timeslot=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+="<div>",(g=c.name)?f=g.call(b,{hash:{},data:e}):(g=b&&b.name,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</div>\n"})),Handlebars.registerPartial("drag",this.Planner.Templates.drag=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="planner-card-drag">',(g=c.dragComponent)?f=g.call(b,{hash:{},data:e}):(g=b&&b.dragComponent,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</div>\n"})),Handlebars.registerPartial("hourline",this.Planner.Templates.hourline=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="hourline"></div>\n'})),this.Planner.Templates.body=Handlebars.template(function(a,b,c,d,e){function f(a,b){var e,f="";return f+="\n            ",e=m.invokePartial(d.timeslot,"timeslot",a,c,d,b),(e||0===e)&&(f+=e),f+="\n          "}function g(a,b,d){var e,f,g="";return g+='\n              <div class="planner-column" data-column-id="',(f=c.id)?e=f.call(a,{hash:{},data:b}):(f=a&&a.id,e=typeof f===o?f.call(a,{hash:{},data:b}):f),g+=p(e)+'">\n                ',e=c.each.call(a,d&&d.rowLabels,{hash:{},inverse:m.noop,fn:m.programWithDepth(4,h,b,d),data:b}),(e||0===e)&&(g+=e),g+="\n              </div>\n          "}function h(a,b,d){var e,f,g,h="";return h+="\n                  ",f=c.times||d&&d.times,g={hash:{},inverse:m.noop,fn:m.program(5,i,b),data:b},e=f?f.call(a,d&&d.timeslots,g):n.call(a,"times",d&&d.timeslots,g),(e||0===e)&&(h+=e),h+="\n                "}function i(){return"\n                      <div></div>\n                  "}function j(a,b){var d,e,f="";return f+='\n          <div class="planner-column-header">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(d)+"</div>\n      "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var k,l="",m=this,n=c.helperMissing,o="function",p=this.escapeExpression;return l+='<div class="planner-scroller">\n    <div class="planner-container">\n        <div class="planner-timeslots">\n          ',k=c.each.call(b,b&&b.rowLabels,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(k||0===k)&&(l+=k),l+='\n        </div>\n        <div class="planner-slider">\n          ',k=c.each.call(b,b&&b.columnLabels,{hash:{},inverse:m.noop,fn:m.programWithDepth(3,g,e,b),data:e}),(k||0===k)&&(l+=k),l+='\n        </div>\n    </div>\n</div>\n\n<div class="planner-header">\n    <div class="planner-timeslots-header"></div>\n    <div class="planner-slider">\n      ',k=c.each.call(b,b&&b.columnLabels,{hash:{},inverse:m.noop,fn:m.program(7,j,e),data:e}),(k||0===k)&&(l+=k),l+='\n    </div>\n</div>\n\n<div class="arrow-switcher arrow-left"></div>\n<div class="arrow-switcher arrow-right"></div>\n'}),function(a,b){"use strict";a.DEFAULTS={},a.registry={},a.loaded={},a.load=function(b,c){if(!Array.isArray(b))throw new Error('"Plugins" option on Planner.js should be a list of string');for(var d=0;d<b.length;d++)a.call(b[d],c)},a.register=function(c,d){a.DEFAULTS=b.extend({},a.DEFAULTS,d.DEFAULTS),a.registry[c]=d},a.call=function(b,c,d){var e=a.registry[b];if("function"!=typeof e)throw new Error("Chosen plugin is not available: "+b);var f=e.bind(c,c.element,c.options,c,d);c.plugins=c.plugins||{},c.plugins[b]=new f,a.loaded[b]=!0},a.isRegistered=function(b){return"undefined"!=typeof a.registry[b]},a.requires=function(b){if(!a.loaded[b])throw new Error('"'+b+'" plugin is required.');return!0}}(Planner.Plugins=Planner.Plugins||{},Planner.Utils),function(a,b,c){"use strict";var d=function(b,d){function e(a,b,c){return Math.min(Math.max(a,b),c)}function f(a){return a=a||g(),a[0].offsetWidth}function g(){for(var a=[],c=b.querySelectorAll(".planner-column"),d=0;d<c.length;d++)"none"!==c[d].style.display&&a.push(c[d]);return a}function h(){var a,b=document.documentElement.clientWidth;if(b>=992)a=l.options.visibleColumns;else{var c=768>b?"phone":"tablet",d=j?"landscape":"portrait";a=l.options.mobileVisibleColumns[c][d]}return a}function i(){j=a.innerHeight<a.innerWidth}this.element=b,this.options=d,this.currentIndex=0,this.cacheSliders=b.querySelectorAll(".planner-slider");var j=!1,k=0,l=this,m=function(){var a=l.element.querySelector(".arrow-left"),b=l.element.querySelector(".arrow-right");a.addEventListener("click",function(){l.slideLeft()}),b.addEventListener("click",function(){l.slideRight()})},n=function(){for(var a=0,b=0,c=!1,d=function(b){b=b.touches[0],a=b.clientX},i=function(d){var f=d.touches[0];if(b=f.clientX-a,!c&&(b<-l.options.minMovement||b>l.options.minMovement)){var i=h(),j=g();c=!0,l.minOffset=0;for(var m=0,n=l.cacheSliders.length;n>m;m++)l.cacheSliders[m].style.transition="none";for(m=0,n=j.length-i;n>m;m++)l.minOffset-=j[m].offsetWidth+l.options.headerOffset}c&&p(e(k+b,l.minOffset,0))},j=function(d){if(c){var e=d.changedTouches[0],g=Math.abs(Math.round((e.clientX-a)/f()));c=!1,b>l.options.minSwipe?l.slideLeft(g):b<-l.options.minSwipe?l.slideRight(g):p(k);for(var h=0;h<l.cacheSliders.length;h++)l.cacheSliders[h].style.transition="";b=0,k=o()}},m=0;m<l.cacheSliders.length;m++)l.cacheSliders[m].addEventListener("touchstart",d),l.cacheSliders[m].addEventListener("touchmove",i),l.cacheSliders[m].addEventListener("touchend",j)},o=function(){var a=l.cacheColumn.offsetWidth+l.options.headerOffset;return-a*l.currentIndex},p=function(a){if("number"!=typeof a)throw new Error("Unable to append a 3D translation if the value isn't a number");for(var b="translate3d("+a+"px, 0, 0)",c=0;c<l.cacheSliders.length;c++)l.cacheSliders[c].style.webkitTransform=b,l.cacheSliders[c].style.mozTransform=b,l.cacheSliders[c].style.msTransform=b,l.cacheSliders[c].style.oTransform=b,l.cacheSliders[c].style.transform=b};this.goToStart=function(){this.currentIndex=0,p(0),k=0},this.slideLeft=function(a){a=a||1,this.currentIndex=Math.max(this.currentIndex-a,0),p(o())},this.slideRight=function(a){a=a||1,this.currentIndex=Math.min(this.currentIndex+a,Math.max(g().length-h(),0)),p(o())},i(),c.touch&&Planner.Plugins.isRegistered("mobile")?(a.addEventListener("resize",i,!1),n()):m()};d.DEFAULTS={minMovement:50,minSwipe:90,headerOffset:5},b.Slider=d,b.register("slider",d)
}(window,Planner.Plugins,Planner.Modernizr),function(a,b,c){"use strict";var d=function(a,b,d){function e(a,b){var c=g(b);h(b,c)}function f(a,b){var c=g(b),d=c.all.items()[1];c.left.discard(b),c.split.discard(b),m(c.all.items()),h(d,c)}function g(a){var b,d,e,f,g=[],h=new c,i=new c,j=new c;for(g.push(a);g.length>0;)if(b=g.shift(),d=a.parentElement,null!==d){f=parseInt(b.getAttribute("data-id"),10),e=a.parentElement.parentElement.querySelectorAll('.planner-card:not(.dragged):not([data-id="'+f+'"])');for(var m=0,n=e.length;n>m;m++)if(k(b,e[m])){var p=l(b,e[m]);p===o?i.in(e[m])||(i.update([b,e[m]]),h.update([b,e[m]]),g.push(e[m])):j.in(e[m])||(j.update([b,e[m]]),h.update([b,e[m]]),g.push(e[m]))}}return{all:h,split:i,left:j}}function h(a,b){b.split.size>0&&i(a,b.split.items()),b.left.size>0&&j(a,b.left.items())}function i(a,b){for(var c=a.offsetLeft,d=q.offsetWidth/b.length,e=0,f=b.length;f>e;e++){var g=c+d*e;b[e].style.width=d+"px",b[e].style.left=g+"px"}}function j(a,c){var d,e,f,g,h,i=a.offsetLeft;c.sort(n),c.shift();for(var j=0,k=c.length;k>j;j++){if(c[j].style.left){var l=c[j].style.left,m=c[j].style.width;l=l.substring(0,l.length-2),m=m.substring(0,m.length-2),d=parseInt(l,10),e=parseInt(m,10)}else d=i-b.marginAdjustment,e=c[j].offsetWidth;h=q.offsetWidth/e*b.collisionOffset,f=d+b.collisionOffset,g=c[j].offsetWidth-h,c[j].style.left=f+"px",c[j].style.width=g+"px"}}function k(a,b){var c=parseInt(a.getAttribute("data-start"),10),d=parseInt(a.getAttribute("data-end"),10),e=parseInt(b.getAttribute("data-start"),10),f=parseInt(b.getAttribute("data-end"),10);return c>=e&&f>=c||d>=e&&f>=d?!0:e>=c&&d>=f||e>=c&&d>=f}function l(a,b){var c=parseInt(a.getAttribute("data-start"),10),d=parseInt(b.getAttribute("data-start"),10);return c===d||c===d+1||d===c+1?o:p}function m(a){for(var b=0,c=a.length;c>b;b++)a[b].style.left="",a[b].style.width=""}function n(a,b){var c=parseInt(a.getAttribute("data-start"),10),d=parseInt(b.getAttribute("data-start"),10);return c-d}var o=0,p=1,q=a.querySelector(".planner-column");d.events.subscribe("/card/interaction/drawn",e),d.events.subscribe("/card/actions/dragged",f),d.events.subscribe("cardDomDrawn",e)};d.DEFAULTS={marginAdjustment:3,collisionOffset:5},a.register("collision",d)}(Planner.Plugins,Planner.Utils,Ds.Set,Ds.HashMap),function(a,b){"use strict";var c=function(a,c){var d={widths:{phone:{landscape:100/c.mobileVisibleColumns.phone.landscape,portrait:100/c.mobileVisibleColumns.phone.portrait},tablet:{landscape:100/c.mobileVisibleColumns.tablet.landscape,portrait:100/c.mobileVisibleColumns.tablet.portrait}}};document.querySelector("head").appendChild(b.createElement(Planner.Templates.mobile(d)))};c.DEFAULTS={mobileVisibleColumns:{phone:{landscape:2,portrait:1},tablet:{landscape:5,portrait:3}}},a.register("mobile",c)}(Planner.Plugins,Planner.Utils),function(a,b,c){"use strict";function d(b,d){function e(){var a=new Date,b=a.getHours()+a.getMinutes()/60;return b*d.timeslotHeight*d.timeslots+d.hourlineMargin}function f(){var b=e(),c=a.screen.height/d.hourlineScreenSection;a.scroll(0,b-c)}function g(){var a=e();h.style.top=a+"px"}var h=c.createElement(Planner.Templates.hourline());b.querySelector(".planner-container").appendChild(h),f(),g(),a.setInterval(g,3600*d.hourlineTickUpdate),this.findHeight=e}d.DEFAULTS={hourlineMargin:85,hourlineScreenSection:3,hourlineTickUpdate:5},b.Hourline=d,b.register("hourline",d)}(window,Planner.Plugins,Planner.Utils),function(a,b,c){"use strict";var d=function(a,d,e){this.element=a,this.options=d,this.planner=e,this.listReduced=[],this.currentInteraction=null,this.currentCard=null,this.currentElement=null,this.currentColumn=null,this.initialIndex=null,this.initialY=null;var f=a.querySelectorAll(".planner-column > div"),g={},h={},i=this,j=function(a,b){g[a]=g[a]||[],g[a].push(b.bind(i))},k=function(a,b){h[a]=h[a]||[],h[a].push(b.bind(i))};c.touch&&Planner.Plugins.isRegistered("mobile")?(j("cardDomDrawn",this.touchTap),k("touchstart",this.touchPress),k("touchmove",this.touchMove),k("touchend",this.touchEnd)):(j("cardDomDrawn",this.addResizeDom),j("cardDomDrawn",this.cardClick),j("cardDomDrawn",this.dragCard),k("mousedown",this.mouseDown),k("mousemove",this.mouseMove),k("mouseup",this.mouseUp),k("dragover",this.dragOver),k("dragenter",this.dragChangeColumn),k("drop",this.drop));for(var l in g)if(g.hasOwnProperty(l))for(var m=0;m<g[l].length;m++)this.planner.events.subscribe(l,g[l][m]);for(var m=0;m<f.length;m++)for(var n in h)if(h.hasOwnProperty(n))for(var o=0;o<h[n].length;o++)f[m].addEventListener(n,h[n][o]);var p=b.createElement(Planner.Templates.interaction());document.querySelector("head").appendChild(p)};d.DEFAULTS={dragComponent:"---"},a.Interaction=d,a.register("interaction",d)}(Planner.Plugins,Planner.Utils,Planner.Modernizr),function(a,b,c){"use strict";var d={};d.createCard=function(a){var d=this.planner._indexToAttribute(c.index(a)),e=this.planner._indexToAttribute(c.index(a)+1),f=c.updateDate(new Date,d.hours,d.minutes),g=c.updateDate(new Date,e.hours,e.minutes),h=[parseInt(a.parentElement.getAttribute("data-column-id"),10)],i=null;return this.options.autoId&&(i=b.generateId(this.options)),isNaN(h)?null:new this.options.model({id:i,start:f,end:g,columns:h})},a.prototype=c.extend(a.prototype,d)}(Planner.Plugins.Interaction,Planner.Helpers,Planner.Utils),function(a,b){"use strict";var c={};c.drag=function(a){this.planner.events.publish("/card/actions/dragged",[this.currentCard,this.currentElement]),a.appendChild(this.currentElement);var c=this.currentElement.getAttribute("data-end")-this.currentElement.getAttribute("data-start"),d=parseInt(this.currentElement.parentElement.parentElement.getAttribute("data-column-id"),10),e=b.index(this.currentElement.parentNode),f=0!==c?c+1:c,g=this.planner._indexToAttribute(e),h=this.planner._indexToAttribute(e+f),i=b.updateDate(this.currentCard.start,g.hours,g.minutes),j=b.updateDate(this.currentCard.end,h.hours,h.minutes);this.currentCard.update({columns:[d],start:i,end:j}),b.removeClass(this.currentElement,"dragged"),this.planner.updateDom(this.currentElement,this.currentCard,d),this.resetDashedDom()},c.resetDashedDom=function(){for(;this.listReduced.length>0;)b.removeClass(this.listReduced.pop(),"card-dashed")},a.prototype=b.extend(a.prototype,c)}(Planner.Plugins.Interaction,Planner.Utils),function(a,b){"use strict";var c={};c.startInteraction=function(a,b,c,d,e){this.currentInteraction=a,this.currentCard=b,this.currentElement=c,this.currentColumn=c.parentElement.parentElement,this.initialIndex=d,this.initialY=e,this.planner.events.publish("/card/interaction/starts",[a])},c.stopInteraction=function(){this.currentElement.style.width="",this.currentElement.style.left="",this.planner.events.publish("/card/interaction/drawn",[this.currentCard,this.currentElement]),this.planner.events.publish("/card/interaction/ends",[this.currentInteraction]),this.currentInteraction=null,this.currentCard=null,this.currentElement=null,this.currentColumn=null,this.initialIndex=null,this.initialY=null},a.prototype=b.extend(a.prototype,c)}(Planner.Plugins.Interaction,Planner.Utils),function(a,b,c){"use strict";var d={};d.addResizeDom=function(a,d){if(!a.fixed){for(var e=c.createElement(b.drag({dragComponent:this.options.dragComponent})),f=d.querySelectorAll(".planner-card-title"),g=0;g<f.length;g++)f[g].parentNode.appendChild(e);e.addEventListener("mousedown",this.mouseDownResize.bind(this,a,d))}},d.resize=function(a){var b=Math.floor((a-this.initialY)/this.options.timeslotHeight),d=this.planner._indexToAttribute(this.initialIndex+b+1);b>=0&&(this.currentCard.update({end:c.updateDate(this.currentCard.end,d.hours,d.minutes)}),this.planner.updateDom(this.currentElement,this.currentCard))},a.prototype=c.extend(a.prototype,d)}(Planner.Plugins.Interaction,Planner.Templates,Planner.Utils),function(a,b){"use strict";var c={};c.cardClick=function(a,b){a.fixed||b.addEventListener("click",this.mouseClick.bind(this,a,b))},c.mouseClick=function(a,b,c){var d=b.children[0],e=b.children[1];c.target!==b&&c.target!==d&&c.target!==e||null!==this.currentInteraction||this.planner.events.publish("cardClicked",[a,b]),c.stopPropagation()},c.mouseDown=function(a){if(a.currentTarget===a.target){var c=this.createCard(a.target);this.planner.drawCard(c);var d=c.columns[0];this.startInteraction("dragCreation",c,this.planner.mapCard.get(c)[d],b.index(a.target),a.clientY),a.preventDefault()}},c.mouseDownResize=function(a,c,d){this.startInteraction("resize",a,c,this.planner._attributeToIndex(a.start),b.offset(c).top-document.body.scrollTop),b.addClass(this.currentElement,"resizable"),d.preventDefault()},c.mouseMove=function(a){("dragCreation"===this.currentInteraction||"resize"===this.currentInteraction)&&(this.resize(a.clientY),a.preventDefault())},c.mouseUp=function(a){if("dragCreation"===this.currentInteraction)this.planner.events.publish("cardCreated",[this.currentCard,this.currentElement]),this.stopInteraction(),a.preventDefault();else if("resize"===this.currentInteraction){if(this.currentCard.columns.length>1){var c=this.planner.mapCard.get(this.currentCard);for(var d in c)c.hasOwnProperty(d)&&(this.planner.updateDom(c[d],this.currentCard),this.planner.events.publish("cardDomDrawn",[this.currentCard,c[d]]))}b.removeClass(this.currentElement,"resizable"),this.planner.events.publish("cardUpdated",[this.currentCard,this.currentElement]),this.stopInteraction(),a.preventDefault()}},a.prototype=b.extend(a.prototype,c)}(Planner.Plugins.Interaction,Planner.Utils),function(a,b){"use strict";var c={};c.dragOver=function(a){a.preventDefault()},c.drop=function(a){this.drag(a.currentTarget),this.planner.events.publish("cardUpdated",[this.currentCard,this.currentElement]),this.stopInteraction(),a.preventDefault()},c.dragChangeColumn=function(a){a.currentTarget.parentElement!==this.currentColumn&&(this.currentColumn=a.currentTarget.parentElement,this.resetDashedDom())},c.dragCard=function(a,c){if(!a.fixed){var d=this;c.setAttribute("draggable",!0);var e=function(e){a.columns.length>1?e.preventDefault():(d.startInteraction("dragMove",a,c),b.addClass(c,"dragged"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",c.outerHTML),e.dataTransfer.setDragImage(c,5,10))},f=function(){b.hasClass(c,"card-dashed")||(b.addClass(c,"card-dashed"),d.listReduced.push(c))};c.addEventListener("dragstart",e),c.addEventListener("dragover",f)}},a.prototype=b.extend(a.prototype,c)}(Planner.Plugins.Interaction,Planner.Utils),function(a,b){"use strict";var c,d=300,e=0,f=0,g={};g.touchPress=function(a){function e(){g=h.createCard(a.target),h.planner.drawCard(g),f=g.columns[0],h.startInteraction("dragCreation",g,h.planner.mapCard.get(g)[f],b.index(a.target),a.touches[0].clientY)}var f,g,h=this;c=setTimeout(e,d)},g.touchMove=function(a){c&&clearTimeout(c);var b=a.touches[0];e=b.pageX,f=b.pageY,null!==this.currentCard&&this.resize(a.touches[0].clientY)},g.touchEnd=function(){c&&clearTimeout(c),null!==this.currentCard&&(this.planner.events.publish("cardCreated",[this.currentCard,this.currentElement]),this.stopInteraction())},g.touchTap=function(a,b){function c(c){var h=c.touches[0],i=e=h.pageX,j=f=h.pageY;setTimeout(function(){i===e&&j===f&&g.planner.events.publish("cardClicked",[a,b])},d)}var g=this;b.addEventListener("touchstart",c)},a.prototype=b.extend(a.prototype,g)}(Planner.Plugins.Interaction,Planner.Utils);