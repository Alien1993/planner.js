var Handlebars=function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e);return f}();!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==ib?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<gb.length;){if(c=gb[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return mb++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:pb?N:qb?O:ob?Q:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&wb&&d-e===0,g=b&(yb|zb)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=lb(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===wb||f.eventType===yb)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=zb&&(i>vb||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=kb(l.x)>kb(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:jb(a.pointers[c].clientX),clientY:jb(a.pointers[c].clientY)},c++;return{timeStamp:lb(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:jb(a[0].clientX),y:jb(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:jb(c/b),y:jb(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Ab:kb(a)>=kb(b)?a>0?Bb:Cb:b>0?Db:Eb}function I(a,b,c){c||(c=Ib);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Ib);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],Jb)-J(a[1],a[0],Jb)}function L(a,b){return I(b[0],b[1],Jb)/I(a[0],a[1],Jb)}function M(){this.evEl=Lb,this.evWin=Mb,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Pb,this.evWin=Qb,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Sb,this.targetIds={},y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=this.targetIds;if(b&(wb|xb)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f=t(a.targetTouches),g=t(a.changedTouches),h=[];if(b===wb)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(yb|zb)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function Q(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new O(this.manager,a),this.mouse=new M(this.manager,a)}function R(a,b){this.manager=a,this.set(b)}function S(a){if(q(a,Yb))return Yb;var b=q(a,Zb),c=q(a,$b);return b&&c?Zb+" "+$b:b||c?b?Zb:$b:q(a,Xb)?Xb:Wb}function T(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=_b,this.simultaneous={},this.requireFail=[]}function U(a){return a&ec?"cancel":a&cc?"end":a&bc?"move":a&ac?"start":""}function V(a){return a==Eb?"down":a==Db?"up":a==Bb?"left":a==Cb?"right":""}function W(a,b){var c=b.manager;return c?c.get(a):a}function X(){T.apply(this,arguments)}function Y(){X.apply(this,arguments),this.pX=null,this.pY=null}function Z(){X.apply(this,arguments)}function $(){T.apply(this,arguments),this._timer=null,this._input=null}function _(){X.apply(this,arguments)}function ab(){X.apply(this,arguments)}function bb(){T.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function cb(a,b){return b=b||{},b.recognizers=m(b.recognizers,cb.defaults.preset),new db(a,b)}function db(a,b){b=b||{},this.options=i(b,cb.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new R(this,this.options.touchAction),eb(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function eb(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function fb(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var gb=["","webkit","moz","MS","ms","o"],hb=b.createElement("div"),ib="function",jb=Math.round,kb=Math.abs,lb=Date.now,mb=1,nb=/mobile|tablet|ip(ad|hone|od)|android/i,ob="ontouchstart"in a,pb=v(a,"PointerEvent")!==d,qb=ob&&nb.test(navigator.userAgent),rb="touch",sb="pen",tb="mouse",ub="kinect",vb=25,wb=1,xb=2,yb=4,zb=8,Ab=1,Bb=2,Cb=4,Db=8,Eb=16,Fb=Bb|Cb,Gb=Db|Eb,Hb=Fb|Gb,Ib=["x","y"],Jb=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Kb={mousedown:wb,mousemove:xb,mouseup:yb},Lb="mousedown",Mb="mousemove mouseup";j(M,y,{handler:function(a){var b=Kb[a.type];b&wb&&0===a.button&&(this.pressed=!0),b&xb&&1!==a.which&&(b=yb),this.pressed&&this.allow&&(b&yb&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:tb,srcEvent:a}))}});var Nb={pointerdown:wb,pointermove:xb,pointerup:yb,pointercancel:zb,pointerout:zb},Ob={2:rb,3:sb,4:tb,5:ub},Pb="pointerdown",Qb="pointermove pointerup pointercancel";a.MSPointerEvent&&(Pb="MSPointerDown",Qb="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Nb[d],f=Ob[a.pointerType]||a.pointerType,g=f==rb;e&wb&&(0===a.button||g)?b.push(a):e&(yb|zb)&&(c=!0);var h=s(b,a.pointerId,"pointerId");0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Rb={touchstart:wb,touchmove:xb,touchend:yb,touchcancel:zb},Sb="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Rb[a.type],c=P.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:rb,srcEvent:a})}}),j(Q,y,{handler:function(a,b,c){var d=c.pointerType==rb,e=c.pointerType==tb;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(yb|zb)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Tb=v(hb.style,"touchAction"),Ub=Tb!==d,Vb="compute",Wb="auto",Xb="manipulation",Yb="none",Zb="pan-x",$b="pan-y";R.prototype={set:function(a){a==Vb&&(a=this.compute()),Ub&&(this.manager.element.style[Tb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),S(a.join(" "))},preventDefaults:function(a){if(!Ub){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,Yb),f=q(d,$b),g=q(d,Zb);return e||f&&c&Fb||g&&c&Gb?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var _b=1,ac=2,bc=4,cc=8,dc=cc,ec=16,fc=32;T.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=W(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=W(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=W(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=W(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?U(d):""),a)}var c=this,d=this.state;cc>d&&b(!0),b(),d>=cc&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=fc)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(fc|_b)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(dc|ec|fc)&&(this.state=_b),this.state=this.process(b),void(this.state&(ac|bc|cc|ec)&&this.tryEmit(b))):(this.reset(),void(this.state=fc))},process:function(){},getTouchAction:function(){},reset:function(){}},j(X,T,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ac|bc),e=this.attrTest(a);return d&&(c&zb||!e)?b|ec:d||e?c&yb?b|cc:b&ac?b|bc:ac:fc}}),j(Y,X,{defaults:{event:"pan",threshold:10,pointers:1,direction:Hb},getTouchAction:function(){var a=this.options.direction,b=[];return a&Fb&&b.push($b),a&Gb&&b.push(Zb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Fb?(e=0===f?Ab:0>f?Bb:Cb,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ab:0>g?Db:Eb,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return X.prototype.attrTest.call(this,a)&&(this.state&ac||!(this.state&ac)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=V(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(Z,X,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Yb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ac)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j($,T,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Wb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(yb|zb)&&!f)this.reset();else if(a.eventType&wb)this.reset(),this._timer=e(function(){this.state=dc,this.tryEmit()},b.time,this);else if(a.eventType&yb)return dc;return fc},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===dc&&(a&&a.eventType&yb?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=lb(),this.manager.emit(this.options.event,this._input)))}}),j(_,X,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Yb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ac)}}),j(ab,X,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Fb|Gb,pointers:1},getTouchAction:function(){return Y.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Fb|Gb)?b=a.velocity:c&Fb?b=a.velocityX:c&Gb&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&kb(b)>this.options.velocity&&a.eventType&yb},emit:function(a){var b=V(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(bb,T,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Xb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&wb&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=yb)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=dc,this.tryEmit()},b.interval,this),ac):dc}return fc},failTimeout:function(){return this._timer=e(function(){this.state=fc},this.options.interval,this),fc},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==dc&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),cb.VERSION="2.0.3",cb.defaults={domEvents:!1,touchAction:Vb,enable:!0,inputTarget:null,inputClass:null,preset:[[_,{enable:!1}],[Z,{enable:!1},["rotate"]],[ab,{direction:Fb}],[Y,{direction:Fb},["swipe"]],[bb],[bb,{event:"doubletap",taps:2},["tap"]],[$]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var gc=1,hc=2;db.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?hc:gc},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&dc)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===hc||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ac|bc|cc)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof T)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&fb(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&eb(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(cb,{INPUT_START:wb,INPUT_MOVE:xb,INPUT_END:yb,INPUT_CANCEL:zb,STATE_POSSIBLE:_b,STATE_BEGAN:ac,STATE_CHANGED:bc,STATE_ENDED:cc,STATE_RECOGNIZED:dc,STATE_CANCELLED:ec,STATE_FAILED:fc,DIRECTION_NONE:Ab,DIRECTION_LEFT:Bb,DIRECTION_RIGHT:Cb,DIRECTION_UP:Db,DIRECTION_DOWN:Eb,DIRECTION_HORIZONTAL:Fb,DIRECTION_VERTICAL:Gb,DIRECTION_ALL:Hb,Manager:db,Input:y,TouchAction:R,TouchInput:O,MouseInput:M,PointerEventInput:N,TouchMouseInput:Q,Recognizer:T,AttrRecognizer:X,Tap:bb,Pan:Y,Swipe:ab,Pinch:Z,Rotate:_,Press:$,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==ib&&define.amd?define(function(){return cb}):"undefined"!=typeof module&&module.exports?module.exports=cb:a[c]=cb}(window,document,"Hammer"),function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):(a.Ds=a.Ds||{},a.Ds.HashMap=b())}(this,function(){"use strict";var a=function(){function a(){throw new Error("Illegal operation for Hashmap")}function b(a){return typeof a+" "+(a instanceof Object?a._hash||(a._hash=++c):a.toString())}var c=0,d=0;this.get=function(a){var c=this[b(a)];return c&&c.value},this.put=function(a,c){var e=b(a);return"undefined"==typeof this[e]?(this[e]={key:a,value:c},d+=1):this[e].value=c,this},this.remove=function(a){var c=b(a),e=this[c];return"undefined"!=typeof e&&(d-=1,delete this[c]),this},Object.defineProperty(this,"size",{get:function(){return d},set:function(){a()}})};return a}),function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):(a.Ds=a.Ds||{},a.Ds.Set=b())}(this,function(){"use strict";var a=function(){function a(){throw new Error("Illegal operation for Set")}function b(a){return typeof a+" "+(a instanceof Object?a._hash||(a._hash=++c):a.toString())}var c=0,d={},e=0;this.in=function(a){var c=b(a);return"undefined"!=typeof d[c]},this.add=function(a){var c=b(a);return"undefined"==typeof d[c]&&(e+=1),d[c]=a,this},this.update=function(a){for(var c=0;c<a.length;c++){var f=b(a[c]);"undefined"==typeof d[f]&&(e+=1),d[f]=a[c]}return this},this.remove=function(a){var c=b(a),f=d[c];if("undefined"==typeof f)throw new Error("KeyError: object "+f+" is not stored");return e-=1,delete d[c],this},this.discard=function(a){try{this.remove(a)}catch(b){}return this},this.clear=function(){for(var a in d)d.hasOwnProperty(a)&&this.remove(d[a]);return this},this.items=function(){return Object.keys(d).map(function(a){return d[a]})},Object.defineProperty(this,"size",{get:function(){return e},set:function(){a()}})};return a}),function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):a.Messenger=b()}(this,function(){"use strict";function a(){var a={},b=-1;this.publish=function(b,c){if(!a[b])return!1;for(var d=a[b],e=d?d.length:0;e--;)d[e].func.apply(this,c);return this},this.subscribe=function(c,d){if(!c||"function"!=typeof d)throw new Error("Missing a valid channel or callback");a[c]||(a[c]=[]);var e=(++b).toString();return a[c].push({token:e,func:d}),e},this.unsubscribe=function(b){if(!b)throw new Error("Can't unsubscribe without a valid token");for(var c in a)if(a[c])for(var d=0,e=a[c].length;e>d;d++)if(a[c][d].token===b)return a[c].splice(d,1),b;throw new Error("Can't unsubscribe from a token that doesn't exist")}}return a}),function(a){"use strict";var b=function(c,d){var e=a.Planner.Utils.getAttributes(c);return d=a.Planner.Utils.extend({},b.DEFAULTS,a.Planner.Plugins.DEFAULTS,e,d),d.plugins=d.plugins||"string"==typeof d.plugins&&d.plugins.split(" ")||[],d.plugins.push("slider"),d.plugins.push("collision"),d.model=d.model||Planner.Models.Card,new a.Planner.Instance(c,d)};b.CONST={ALIGNMENT:{TOP:0,MIDDLE:1}},b.DEFAULTS={autoId:!0,show:!0,plugins:[],model:null,timeslots:4,timeslotHeight:25,timeslotPadding:20,cardTitleMargin:6,centered:b.CONST.ALIGNMENT.TOP,columnLabels:[],rowLabels:[],visibleColumns:7},document.addEventListener("DOMContentLoaded",function(){for(var a=document.querySelectorAll('[data-planner=""]'),c=0;c<a.length;c++)new b(a[c])}),a.Planner=b}(window),Planner.Modernizr=function(a,b,c){function d(a){n.cssText=a}function e(a,b){return typeof a===b}var f,g,h,i="2.8.3",j={},k=b.documentElement,l="modernizr",m=b.createElement(l),n=m.style,o=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),p={},q=[],r=q.slice,s=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:l+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',l,'">',a,"</style>"].join(""),j.id=l,(m?j:n).innerHTML+=f,n.appendChild(j),m||(n.style.background="",n.style.overflow="hidden",i=k.style.overflow,k.style.overflow="hidden",k.appendChild(n)),g=c(j,a),m?j.parentNode.removeChild(j):(n.parentNode.removeChild(n),k.style.overflow=i),!!g},t={}.hasOwnProperty;h=e(t,"undefined")||e(t.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return t.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=r.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(r.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(r.call(arguments)))};return d}),p.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:s(["@media (",o.join("touch-enabled),("),l,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c};for(var u in p)h(p,u)&&(g=u.toLowerCase(),j[g]=p[u](),q.push((j[g]?"":"no-")+g));return j.addTest=function(a,b){if("object"==typeof a)for(var d in a)h(a,d)&&j.addTest(d,a[d]);else{if(a=a.toLowerCase(),j[a]!==c)return j;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(k.className+=" "+(b?"":"no-")+a),j[a]=b}return j},d(""),m=f=null,j._version=i,j._prefixes=o,j.testStyles=s,j}(this,this.document),function(a,b){"use strict";a.Instance=function(c,d){this.element=c,this.options=d,this.mapCard=new b,this.mapDom=new b,this.events=new Messenger,0===d.columnLabels.length&&(d.columnLabels=a.Helpers.getDefaultColumns()),0===d.rowLabels.length&&(d.rowLabels=a.Helpers.getDefaultRows()),d.visibleColumns=d.visibleColumns>d.columnLabels.length?d.columnLabels.length:d.visibleColumns,c.setAttribute("data-planner","container"),d.show&&(this.element.innerHTML=a.Templates.body(d));var e=document.querySelector("head");e.appendChild(this._computedCSS()),a.Plugins.load(d.plugins,this)}}(window.Planner=window.Planner||{},Ds.HashMap),function(a,b){"use strict";a.pad=function(a,b){return"undefined"==typeof b&&(b=-2),("0"+a).slice(b)},a.extend=function(a){a=a||{};for(var b=1;b<arguments.length;b++)if(arguments[b])for(var c in arguments[b])arguments[b].hasOwnProperty(c)&&(a[c]=arguments[b][c]);return a},a.addClass=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},a.removeClass=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},a.hasClass=function(a,b){a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)},a.createElement=function(a){var b=document.createElement("div");return b.innerHTML=a,b.childNodes[0]},a.getAttributes=function(a){var c=a.attributes,d={};for(var f in c)if(c.hasOwnProperty(f)&&c[f].name&&c[f].name.indexOf("data-")>-1){var g=e(c[f].name.split("data-")[1]),h=c[f].value;if("string"==typeof h)try{h="true"===h?!0:"false"===h?!1:"null"===h?null:+h+""===h?+h:h}catch(i){}else h=b;d[g]=h}return d},a.index=function(a){var b=a.parentNode;return Array.prototype.indexOf.call(b.children,a)},a.offset=function(a){var b=a.getBoundingClientRect();return{top:b.top+document.body.scrollTop,left:b.left+document.body.scrollLeft}};var c=/([\:\-\_]+(.))/g,d=/^moz([A-Z])/,e=function(a){return a.replace(c,function(a,b,c,d){return d?c.toUpperCase():c}).replace(d,"Moz$1")}}(Planner.Utils=Planner.Utils||{}),function(a,b){"use strict";var c=[{id:0,name:"Monday"},{id:1,name:"Tuesday"},{id:2,name:"Wednesday"},{id:3,name:"Thursday"},{id:4,name:"Friday"},{id:5,name:"Saturday"},{id:6,name:"Sunday"}],d=[{name:"00:00"},{name:"01:00"},{name:"02:00"},{name:"03:00"},{name:"04:00"},{name:"05:00"},{name:"06:00"},{name:"07:00"},{name:"08:00"},{name:"09:00"},{name:"10:00"},{name:"11:00"},{name:"12:00"},{name:"13:00"},{name:"14:00"},{name:"15:00"},{name:"16:00"},{name:"17:00"},{name:"18:00"},{name:"19:00"},{name:"20:00"},{name:"21:00"},{name:"22:00"},{name:"23:00"}];a.getDefaultColumns=function(){return c},a.getDefaultRows=function(){return d},a.generateId=function(a){return a.lastId=a.lastId||999,++a.lastId},b.registerHelper("times",function(a,b){for(var c="",d=0;a>d;++d)c+=b.fn(d);return c})}(Planner.Helpers=Planner.Helpers||{},Handlebars),function(a,b){"use strict";var c={};c._computedCSS=function(){var a=this.options.timeslotHeight*this.options.timeslots,b=this.options.centered?a/2:a,c={timeslots:this.options.timeslots,timeslotHeight:this.options.timeslotHeight,timeslotPadding:a-this.options.timeslotPadding,lastTimeslotPadding:b,sliderWidth:100/this.options.visibleColumns},d=document.createElement("style");return d.innerHTML=Planner.Templates.styles(c),d},c._attributeToIndex=function(a){var b;if("function"==typeof a.getHours&&"function"==typeof a.getMinutes)b=a.getHours()*this.options.timeslots+a.getMinutes()/(60/this.options.timeslots);else{if("string"!=typeof a)throw new Error("Unable to find a valid index from start/end card attribute. Define your own implementation.");
b=this.options.rowLabels.indexOf(a)}return b},c._indexToAttribute=function(a){var b,c=Math.floor((a-1)/this.options.timeslots),d=15*(a%this.options.timeslots);return d===a%this.options.timeslots&&(c+=1),b=new Date,b.setHours(c),b.setMinutes(d),b.setSeconds(0),b},a.prototype=b.extend(a.prototype,c)}(Planner.Instance=Planner.Instance||{},Planner.Utils),function(a,b,c){"use strict";var d={};d.drawCard=function(a){var c,d=this.mapCard.get(a);if("undefined"==typeof d){d={},this.mapCard.put(a,d);for(var e=0;e<a.columns.length;e++){var f=a.columns[e];c=b.createElement(Planner.Templates.card(a)),this.updateDom(c,a,f),this.mapDom.put(c,a),d[f]=c,this._drawDom(c)}this.events.publish("cardDrawn",[a])}},d._drawDom=function(a){var c=parseInt(a.getAttribute("data-column"),10),d=parseInt(a.getAttribute("data-start"),10),e=b.index(this.element.querySelector('[data-column-id="'+c+'"]'))+1;this.element.querySelector(".planner-column:nth-child("+e+") > div:nth-child("+(d+1)+")").appendChild(a),this.events.publish("cardDomDrawn",[this.mapDom.get(a),a])},d.updateDom=function(a,b,c){var d=this._attributeToIndex(b.start),e=this._attributeToIndex(b.end)-1;if(0>e&&(e=this.options.timeslots*this.options.rowLabels.length-1),e>=d){var f=(e-d+1)*this.options.timeslotHeight-this.options.cardTitleMargin;"undefined"!=typeof c&&a.setAttribute("data-column",c),a.setAttribute("data-id",b.id),a.setAttribute("data-start",d),a.setAttribute("data-end",e),a.querySelector(".planner-card-time").innerHTML=b.header,a.style.height=f+"px"}},d._removeDom=function(a){a.parentNode.removeChild(a);var b=this.mapDom.get(a),c=this.mapCard.get(b);delete c[parseInt(a.getAttribute("data-column"),10)],this.mapDom.remove(a),this.events.publish("cardDomDeleted",[b,a])},d.undrawCard=function(a){var b,c=this.mapCard.get(a);for(var d in c)c.hasOwnProperty(d)&&(b=c[d],this._removeDom(b));this.mapCard.remove(a),this.events.publish("cardDeleted",[this])},d.clear=function(){for(var a,b=document.querySelectorAll(".planner-card"),d=0;d<b.length;d++)a=b[d],a.parentNode.removeChild(a);this.mapCard=new c,this.mapDom=new c},a.prototype=b.extend(a.prototype,d)}(Planner.Instance=Planner.Instance||{},Planner.Utils,Ds.HashMap),function(a){"use strict";a.Card=function(a){var d={};return a=a||{},d.id=a.id||null,d.title=a.title||null,d.content=a.content||null,d.start=a.start||null,d.end=a.end||null,d.columns=a.columns||[],Object.defineProperty(d,"header",{get:b}),d.update=c,d};var b=function(){var a="";return null!==this.start&&null!==this.end&&(a="function"==typeof this.start.getHours&&"function"==typeof this.start.getMinutes&&"function"==typeof this.end.getHours&&"function"==typeof this.end.getMinutes?Planner.Utils.pad(this.start.getHours())+":"+Planner.Utils.pad(this.start.getMinutes())+" - "+Planner.Utils.pad(this.end.getHours())+":"+Planner.Utils.pad(this.end.getMinutes()):this.start===this.end?this.start:this.start+"-"+this.end),a},c=function(a){this.id=a.id||this.id,this.title=a.title||this.title,this.content=a.content||this.content,this.start=a.start||this.start,this.end=a.end||this.end,this.columns=a.columns||this.columns}}(Planner.Models=Planner.Models||{}),this.Planner=this.Planner||{},this.Planner.Templates=this.Planner.Templates||{},this.Planner.Templates.interaction=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f+="<style>\n    \n\n    div.planner-card > .planner-card-drag {\n        width: 100%;\n        text-align: center;\n        font-size: 10px;\n        bottom: 1px;\n        position: absolute;\n        cursor: ns-resize;\n    }\n\n    div.planner-card.resizable {\n        cursor: ns-resize;\n    }\n</style>\n"}),this.Planner.Templates.mobile=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+="<style>\n    \n\n    @media (max-width: 768px) {\n        .planner-container.planner-column {\n            width: ",(g=c.mobileWidth)?f=g.call(b,{hash:{},data:e}):(g=b&&b.mobileWidth,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"%;\n            margin-right: 5px;\n        }\n\n        .planner-header.planner-column-header {\n            width: ",(g=c.mobileWidth)?f=g.call(b,{hash:{},data:e}):(g=b&&b.mobileWidth,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"%;\n            margin-right: 5px;\n        }\n\n        .planner-slider {\n            width: ",(g=c.mobileWidth)?f=g.call(b,{hash:{},data:e}):(g=b&&b.mobileWidth,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"%;\n        }\n\n        .planner-timeslots {\n            padding-right: 5px;\n        }\n\n        .planner-card-drag {\n            display: none;\n        }\n    }\n</style>\n"}),this.Planner.Templates.styles=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+="\n\n.planner-column > div {\n    height: ",(g=c.timeslotHeight)?f=g.call(b,{hash:{},data:e}):(g=b&&b.timeslotHeight,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"px;\n}\n\n.planner-column > div:nth-child(",(g=c.timeslots)?f=g.call(b,{hash:{},data:e}):(g=b&&b.timeslots,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"n) {\n    border-bottom: 2px solid #cccccc;\n}\n\n\n\n.planner-timeslots > div:not(:first-child) {\n    padding-top: ",(g=c.timeslotPadding)?f=g.call(b,{hash:{},data:e}):(g=b&&b.timeslotPadding,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"px;\n}\n\n.planner-timeslots > div:last-child {\n    padding-bottom: ",(g=c.lastTimeslotPadding)?f=g.call(b,{hash:{},data:e}):(g=b&&b.lastTimeslotPadding,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"px;\n}\n\n.planner-slider {\n    width: ",(g=c.sliderWidth)?f=g.call(b,{hash:{},data:e}):(g=b&&b.sliderWidth,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"%;\n}\n"}),this.Planner=this.Planner||{},this.Planner.Templates=this.Planner.Templates||{},Handlebars.registerPartial("card",this.Planner.Templates.card=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="planner-card">\n    <div class="planner-card-time">',(g=c.header)?f=g.call(b,{hash:{},data:e}):(g=b&&b.header,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</div>\n    <div class="planner-card-title">',(g=c.title)?f=g.call(b,{hash:{},data:e}):(g=b&&b.title,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</div>\n</div>\n"})),Handlebars.registerPartial("column",this.Planner.Templates.column=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f})),Handlebars.registerPartial("timeslot",this.Planner.Templates.timeslot=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+="<div>",(g=c.name)?f=g.call(b,{hash:{},data:e}):(g=b&&b.name,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</div>\n"})),Handlebars.registerPartial("drag",this.Planner.Templates.drag=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="planner-card-drag">',(g=c.dragComponent)?f=g.call(b,{hash:{},data:e}):(g=b&&b.dragComponent,f=typeof g===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</div>\n"})),Handlebars.registerPartial("hourline",this.Planner.Templates.hourline=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="hourline"></div>\n'})),this.Planner.Templates.body=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n            <div class="planner-column-header">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=typeof e===m?e.call(a,{hash:{},data:b}):e),f+=n(d)+"</div>\n        "}function g(a,b){var e,f="";return f+="\n            ",e=o.invokePartial(d.timeslot,"timeslot",a,c,d,b),(e||0===e)&&(f+=e),f+="\n        "}function h(a,b,d){var e,f,g="";return g+='\n            <div class="planner-column" data-column-id="',(f=c.id)?e=f.call(a,{hash:{},data:b}):(f=a&&a.id,e=typeof f===m?f.call(a,{hash:{},data:b}):f),g+=n(e)+'">\n                ',e=c.each.call(a,d&&d.rowLabels,{hash:{},inverse:o.noop,fn:o.programWithDepth(6,i,b,d),data:b}),(e||0===e)&&(g+=e),g+="\n            </div>\n        "}function i(a,b,d){var e,f,g,h="";return h+="\n                    ",f=c.times||d&&d.times,g={hash:{},inverse:o.noop,fn:o.program(7,j,b),data:b},e=f?f.call(a,d&&d.timeslots,g):p.call(a,"times",d&&d.timeslots,g),(e||0===e)&&(h+=e),h+="\n                "}function j(){return"\n                        <div></div>\n                    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var k,l="",m="function",n=this.escapeExpression,o=this,p=c.helperMissing;return l+='<div class="planner-header">\n    <div class="planner-timeslots-header"></div>\n    <div class="planner-slider">\n        ',k=c.each.call(b,b&&b.columnLabels,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(k||0===k)&&(l+=k),l+='\n    </div>\n</div>\n\n<div class="planner-container">\n    <div class="arrow-switcher arrow-left"></div>\n    <div class="planner-timeslots">\n        ',k=c.each.call(b,b&&b.rowLabels,{hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e}),(k||0===k)&&(l+=k),l+='\n    </div>\n    <div class="planner-slider">\n        ',k=c.each.call(b,b&&b.columnLabels,{hash:{},inverse:o.noop,fn:o.programWithDepth(5,h,e,b),data:e}),(k||0===k)&&(l+=k),l+='\n    </div>\n    <div class="arrow-switcher arrow-right"></div>\n</div>\n'}),function(a,b){"use strict";a.DEFAULTS={},a.registry={},a.loaded={},a.load=function(b,c){if(!Array.isArray(b))throw new Error('"Plugins" option on Planner.js should be a list of string');for(var d=0;d<b.length;d++)a.call(b[d],c)},a.register=function(c,d){a.DEFAULTS=b.extend({},a.DEFAULTS,d.DEFAULTS),a.registry[c]=d},a.call=function(b,c,d){var e=a.registry[b];if("function"!=typeof e)throw new Error("Chosen plugin is not available: "+b);var f=e.bind(c,c.element,c.options,c,d);c.plugins=c.plugins||{},c.plugins[b]=new f,a.loaded[b]=!0},a.isRegistered=function(b){return"undefined"!=typeof a.registry[b]},a.requires=function(b){if(!a.loaded[b])throw new Error('"'+b+'" plugin is required.');return!0}}(Planner.Plugins=Planner.Plugins||{},Planner.Utils),function(a,b){"use strict";var c=function(a,c){this.element=a,this.options=c,this.currentIndex=0,this.cacheSliders=a.querySelectorAll(".planner-slider"),this.cacheColumn=a.querySelector(".planner-column");var d=this,e=function(){var a=d.element.querySelector(".arrow-left"),b=d.element.querySelector(".arrow-right");a.addEventListener("click",d.slideLeft.bind(d)),b.addEventListener("click",d.slideRight.bind(d))},f=function(){for(var a=0;a<d.cacheSliders.length;a++){var b=new Hammer(d.cacheSliders[a]);b.on("swiperight",d.slideLeft.bind(d)),b.on("swipeleft",d.slideRight.bind(d))}},g=function(){var a=d.cacheColumn.offsetWidth+d.options.headerOffset;return-a*d.currentIndex},h=function(a){if("number"!=typeof a)throw new Error("Unable to append a 3D translation if the value isn't a number");for(var b="translateX("+a+"px)",c=0;c<d.cacheSliders.length;c++)d.cacheSliders[c].style.webkitTransform=b,d.cacheSliders[c].style.mozTransform=b,d.cacheSliders[c].style.msTransform=b,d.cacheSliders[c].style.oTransform=b,d.cacheSliders[c].style.transform=b};this.slideLeft=function(){this.currentIndex>0&&(this.currentIndex-=1,h(g()))},this.slideRight=function(){var a=document.documentElement.clientWidth<=768?this.options.mobileVisibleColumns:this.options.visibleColumns;this.currentIndex<this.options.columnLabels.length-a&&(this.currentIndex+=1,h(g()))},b.touch&&Planner.Plugins.isRegistered("mobile")?f():e()};c.DEFAULTS={headerOffset:5},a.Slider=c,a.register("slider",c)}(Planner.Plugins,Planner.Modernizr),function(a,b,c){"use strict";var d=function(a,b,d){function e(a,b,c){var d=f(b);c&&(d.left.discard(b),d.split.discard(b),j(d.all.items())),g(b,d)}function f(a){var b,d,e,f=[],g=new c,j=new c,k=new c;for(f.push(a);f.length>0;){b=f.shift(),e=parseInt(b.getAttribute("data-id"),10),d=a.parentElement.parentElement.querySelectorAll('.planner-card:not(.dragged):not([data-id="'+e+'"])');for(var m=0;m<d.length;m++)if(h(b,d[m])){var n=i(b,d[m]);n===l?j.in(d[m])||(j.update([b,d[m]]),g.update([b,d[m]]),f.push(d[m])):k.in(d[m])||(k.update([b,d[m]]),g.update([b,d[m]]),f.push(d[m]))}}return{all:g,split:j,left:k}}function g(a,c){var d,e,f,g,h=c.split.items(),i=c.left.items(),j=a.offsetLeft,l=a.parentNode.offsetWidth;if(h.length>0){var m=l/h.length;for(g=0;g<h.length;g++)h[g].style.width=m+"px",h[g].style.left=j+m*g+"px"}if(i.length>0)for(i.sort(k),i.shift(),g=0;g<i.length;g++){if(i[g].style.left){var n=i[g].style.left,o=i[g].style.width;n=n.substring(0,n.length-2),o=o.substring(0,o.length-2),d=parseInt(n,10),e=parseInt(o,10)}else d=j-b.marginAdjustment,e=i[g].offsetWidth;f=l/e*b.collisionOffset,i[g].style.left=d+b.collisionOffset+"px",i[g].style.width=i[g].offsetWidth-f+"px"}}function h(a,b){var c=parseInt(a.getAttribute("data-start"),10),d=parseInt(a.getAttribute("data-end"),10),e=parseInt(b.getAttribute("data-start"),10),f=parseInt(b.getAttribute("data-end"),10);return c>=e&&f>=c||d>=e&&f>=d?!0:e>=c&&d>=f||e>=c&&d>=f}function i(a,b){var c=parseInt(a.getAttribute("data-start"),10),d=parseInt(b.getAttribute("data-start"),10);return c===d||c===d+1||d===c+1?l:m}function j(a){for(var b=0;b<a.length;b++)a[b].style.left="",a[b].style.width=""}function k(a,b){var c=parseInt(a.getAttribute("data-start"),10),d=parseInt(b.getAttribute("data-start"),10);return c-d}var l=0,m=1;d.events.subscribe("/card/interaction/drawn",e),d.events.subscribe("cardDomDrawn",e),d.events.subscribe("/card/actions/dragged",e)};d.DEFAULTS={marginAdjustment:3,collisionOffset:5},a.register("collision",d)}(Planner.Plugins,Planner.Utils,Ds.Set),function(a,b){"use strict";var c=function(a,c){var d={mobileWidth:100/c.mobileVisibleColumns};document.querySelector("head").appendChild(b.createElement(Planner.Templates.mobile(d)))};c.DEFAULTS={mobileVisibleColumns:1},a.register("mobile",c)}(Planner.Plugins,Planner.Utils),function(a,b,c){"use strict";var d=function(b,d){function e(a){var b=a.getHours()+a.getMinutes()/60;return b*d.timeslotHeight*d.timeslots+d.hourlineMargin}function f(){var b=e(new Date),c=a.screen.height/d.hourlineScreenSection;a.scroll(0,b-c)}function g(){var a=e(new Date);h.style.top=a+"px"}var h=c.createElement(Planner.Templates.hourline());b.appendChild(h),f(),g(),a.setInterval(g,3600*d.hourlineTickUpdate)};d.DEFAULTS={hourlineMargin:85,hourlineScreenSection:3,hourlineTickUpdate:5},b.register("hourline",d)}(window,Planner.Plugins,Planner.Utils),function(a,b,c){"use strict";var d=function(a,d,e){this.element=a,this.options=d,this.planner=e,this.listReduced=[],this.currentInteraction=null,this.currentCard=null,this.currentElement=null,this.currentColumn=null,this.initialIndex=null,this.initialY=null;var f,g=a.querySelectorAll(".planner-column > div"),h={},i={},j=this,k=function(a,b){h[a]=h[a]||[],h[a].push(b.bind(j))},l=function(a,b){i[a]=i[a]||[],i[a].push(b.bind(j))};c.touch&&Planner.Plugins.isRegistered("mobile")?(k("cardDomDrawn",this.touchTap),l("press",this.touchPress),l("touchmove",this.touchMove),l("touchend",this.touchEnd)):(k("cardDomDrawn",this.addResizeDom),k("cardDomDrawn",this.cardClick),k("cardDomDrawn",this.dragCard),l("mousedown",this.mouseDown),l("mousemove",this.mouseMove),l("mouseup",this.mouseUp),l("dragover",this.dragOver),l("dragenter",this.dragChangeColumn),l("drop",this.drop));for(var m in h)if(h.hasOwnProperty(m))for(var n=0;n<h[m].length;n++)this.planner.events.subscribe(m,h[m][n]);for(var n=0;n<g.length;n++){c.touch&&Planner.Plugins.isRegistered("mobile")&&(f=new Hammer(g[n]));for(var o in i)if(i.hasOwnProperty(o))for(var p=0;p<i[o].length;p++)g[n].addEventListener(o,i[o][p]),c.touch&&Planner.Plugins.isRegistered("mobile")&&f.on(o,i[o][p])}var q=b.createElement(Planner.Templates.interaction());document.querySelector("head").appendChild(q)};d.DEFAULTS={dragComponent:"---"},a.Interaction=d,a.register("interaction",d)}(Planner.Plugins,Planner.Utils,Planner.Modernizr),function(a,b,c){"use strict";var d={};d.createCard=function(a){var d=this.planner._indexToAttribute(c.index(a)),e=this.planner._indexToAttribute(c.index(a)+1),f=[parseInt(a.parentElement.getAttribute("data-column-id"),10)],g=null;return this.options.autoId&&(g=b.generateId(this.options)),isNaN(f)?null:this.options.model({id:g,start:d,end:e,columns:f})},a.prototype=c.extend(a.prototype,d)}(Planner.Plugins.Interaction,Planner.Helpers,Planner.Utils),function(a,b){"use strict";var c={};c.drag=function(a){this.planner.events.publish("/card/actions/dragged",[this.currentCard,this.currentElement,!0]),a.appendChild(this.currentElement);var c=this.currentElement.getAttribute("data-end")-this.currentElement.getAttribute("data-start"),d=b.index(this.currentElement.parentNode.parentNode)+1,e=b.index(this.currentElement.parentNode);this.currentCard.update({columns:[d],start:this.planner._indexToAttribute(e),end:this.planner._indexToAttribute(e+c+1)}),b.removeClass(this.currentElement,"dragged"),this.planner.updateDom(this.currentElement,this.currentCard,d),this.resetDashedDom()},c.resetDashedDom=function(){for(;this.listReduced.length>0;)b.removeClass(this.listReduced.pop(),"card-dashed")},c.dragHandlers=function(a){a.columns.length>1},a.prototype=b.extend(a.prototype,c)}(Planner.Plugins.Interaction,Planner.Utils),function(a,b){"use strict";var c={};c.startInteraction=function(a,b,c,d,e){this.currentInteraction=a,this.currentCard=b,this.currentElement=c,this.currentColumn=c.parentElement.parentElement,this.initialIndex=d,this.initialY=e},c.stopInteraction=function(){this.currentElement.style.width="",this.currentElement.style.left="",this.planner.events.publish("/card/interaction/drawn",[this.currentCard,this.currentElement]),this.currentInteraction=null,this.currentCard=null,this.currentElement=null,this.currentColumn=null,this.initialIndex=null,this.initialY=null},a.prototype=b.extend(a.prototype,c)}(Planner.Plugins.Interaction,Planner.Utils),function(a,b,c){"use strict";var d={};d.addResizeDom=function(a,d){for(var e=c.createElement(b.drag({dragComponent:this.options.dragComponent})),f=d.querySelectorAll(".planner-card-title"),g=0;g<f.length;g++)f[g].parentNode.appendChild(e);e.addEventListener("mousedown",this.mouseDownResize.bind(this,a,d))},d.resize=function(a){var b=Math.floor((a-this.initialY)/this.options.timeslotHeight),c=this.initialIndex+b;this.currentCard.update({end:this.planner._indexToAttribute(c+1)}),this.planner.updateDom(this.currentElement,this.currentCard)},a.prototype=c.extend(a.prototype,d)}(Planner.Plugins.Interaction,Planner.Templates,Planner.Utils),function(a,b){"use strict";var c={};c.cardClick=function(a,b){b.addEventListener("click",this.mouseClick.bind(this,a,b))},c.mouseClick=function(a,b){var c=b.children[0],d=b.children[1];event.target!==b&&event.target!==c&&event.target!==d||null!==this.currentInteraction||this.planner.events.publish("cardClicked",[a,b]),event.stopPropagation()},c.mouseDown=function(a){if(a.currentTarget===a.target){var c=this.createCard(a.target);this.planner.drawCard(c);var d=c.columns[0];this.startInteraction("dragCreation",c,this.planner.mapCard.get(c)[d],b.index(a.target),a.clientY),a.preventDefault()}},c.mouseDownResize=function(a,c,d){this.startInteraction("resize",a,c,this.planner._attributeToIndex(a.start),b.offset(c).top-document.body.scrollTop),b.addClass(this.currentElement,"resizable"),d.preventDefault()},c.mouseMove=function(a){("dragCreation"===this.currentInteraction||"resize"===this.currentInteraction)&&(this.resize(a.clientY),a.preventDefault())},c.mouseUp=function(a){if("dragCreation"===this.currentInteraction)this.planner.events.publish("cardCreated",[this.currentCard,this.currentElement]),this.stopInteraction(),a.preventDefault();else if("resize"===this.currentInteraction){if(this.currentCard.columns.length>1){var c=this.planner.mapCard.get(this.currentCard);for(var d in c)c.hasOwnProperty(d)&&(this.planner.updateDom(c[d],this.currentCard),this.planner.events.publish("cardDomDrawn",[this.currentCard,c[d]]))}b.removeClass(this.currentElement,"resizable"),this.planner.events.publish("cardUpdated",[this.currentCard,this.currentElement]),this.stopInteraction(),a.preventDefault()}},a.prototype=b.extend(a.prototype,c)}(Planner.Plugins.Interaction,Planner.Utils),function(a,b){"use strict";var c={};c.dragOver=function(a){a.preventDefault()},c.drop=function(a){this.drag(a.currentTarget),this.planner.events.publish("cardUpdated",[this.currentCard,this.currentElement]),this.stopInteraction(),a.preventDefault()},c.dragChangeColumn=function(a){a.currentTarget.parentElement!==this.currentColumn&&(this.currentColumn=a.currentTarget.parentElement,this.resetDashedDom())},c.dragCard=function(a,c){var d=this;c.setAttribute("draggable",!0);var e=function(e){a.columns.length>1?e.preventDefault():(d.startInteraction("dragMove",a,c),b.addClass(c,"dragged"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",c.outerHTML),e.dataTransfer.setDragImage(c,5,10))},f=function(){b.hasClass(c,"card-dashed")||(b.addClass(c,"card-dashed"),d.listReduced.push(c))};c.addEventListener("dragstart",e),c.addEventListener("dragover",f)},a.prototype=b.extend(a.prototype,c)}(Planner.Plugins.Interaction,Planner.Utils),function(a,b){"use strict";var c={};c.touchPress=function(a){var c=this.createCard(a.srcEvent.target);if(null!==c){this.planner.drawCard(c);var d=c.columns[0];this.startInteraction("dragCreation",c,this.planner.mapCard.get(c)[d],b.index(a.target),a.srcEvent.touches[0].clientY)}},c.touchMove=function(a){null!==this.currentCard&&(this.resize(a.touches[0].clientY),a.preventDefault())},c.touchEnd=function(){null!==this.currentCard&&(this.planner.events.publish("cardCreated",[this.currentCard,this.currentElement]),this.stopInteraction())},c.touchTap=function(a,b){var c=function(){this.planner.events.publish("cardClicked",[a,b])},d=new Hammer(b);d.on("tap",c.bind(this))},a.prototype=b.extend(a.prototype,c)}(Planner.Plugins.Interaction,Planner.Utils);